(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1524:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},18475:(e,s,t)=>{"use strict";t.d(s,{NC:()=>d,bn:()=>x,nO:()=>m});var a=t(95155);t(12115);var l=t(21873),r=t(26921),c=t(1524),n=t(25016);function i(e){let{children:s,className:t="",onClick:l,hoverable:r=!1}=e;return(0,a.jsx)("div",{className:"".concat("bg-white rounded-card shadow-card border border-gray-100 transition-all duration-200"," ").concat(r?"hover:shadow-card-hover hover:-translate-y-0.5 cursor-pointer":""," ").concat(l?"active:scale-98":""," ").concat(t),onClick:l,children:s})}function d(e){let{station:s,onClick:t,showStats:r=!0}=e,c=s.currentCount||0,n=s.capacity,d=n>0?c/n*100:0;return(0,a.jsx)(i,{hoverable:!!t,onClick:t,className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-machikasa-blue"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-base",children:s.nameJa})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:s.address}),r&&(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:c}),(0,a.jsxs)("span",{className:"text-gray-500",children:["/",n," 利用可能"]})]}),(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(d>=70?"text-green-600 bg-green-100":d>=30?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"),children:[Math.round(d),"%"]})]})})]}),(0,a.jsx)("div",{className:"text-2xl ml-3",children:"\uD83C\uDFDB️"})]})})}function x(e){let{transaction:s,showUser:t=!1,onClick:l}=e,d="borrow"===s.action,x=d?r.A:c.A;return(0,a.jsx)(i,{hoverable:!!l,onClick:l,className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat(d?"bg-blue-50":"bg-green-50"),children:(0,a.jsx)(x,{className:"h-4 w-4 ".concat(d?"text-blue-600":"text-green-600")})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:d?"傘を借りました":"傘を返却しました"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(0,n.Di)(s.timestamp)}),!d&&s.pointsEarned&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["+",s.pointsEarned,"pt"]})]}),t&&(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["ユーザー: ",s.userId.slice(-6)]})]}),(0,a.jsx)("div",{className:"text-lg",children:d?"\uD83D\uDCE4":"\uD83D\uDCE5"})]})})}function m(e){let{title:s,value:t,subtitle:l,icon:r,color:c="blue",trend:n}=e;return(0,a.jsx)(i,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),l&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:l}),n&&(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsxs)("span",{className:"text-xs font-medium ".concat(n.value>=0?"text-green-600":"text-red-600"),children:[n.value>0?"+":"",n.value]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:n.label})]})]}),r&&(0,a.jsx)("div",{className:"p-2 rounded-full ".concat({blue:"text-blue-600 bg-blue-50",green:"text-green-600 bg-green-50",yellow:"text-yellow-600 bg-yellow-50",red:"text-red-600 bg-red-50",gray:"text-gray-600 bg-gray-50"}[c]),children:r})]})})}},21873:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},25016:(e,s,t)=>{"use strict";function a(e){return new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function l(e){return e.substring(0,5)}function r(e){switch(e){case"available":return"利用可能";case"in_use":return"使用中";case"maintenance":return"メンテナンス";case"lost":return"紛失";default:return"不明"}}function c(e){switch(e){case"good":return"良好";case"fair":return"普通";case"poor":return"要修理";default:return"不明"}}function n(e){switch(e){case"student":return"学生";case"store":return"店舗";case"admin":return"管理者";default:return"不明"}}function i(){let e=["次の人のためにありがとう☂️","素晴らしい！地域の輪を広げています\uD83C\uDF1F","お疲れさまでした！ポイントが加算されました✨","ご利用ありがとうございました\uD83D\uDE4F","みんなで支える街づくり、感謝です\uD83D\uDC99","傘シェアコミュニティの一員として感謝！\uD83E\uDD1D","雨の日を支えてくれてありがとう\uD83C\uDF27️","返却完了！次回もよろしくお願いします\uD83D\uDE0A"];return e[Math.floor(Math.random()*e.length)]}function d(e){return/^machikasa:\/\/umbrella\/[\w-]+$/.test(e)}function x(e){let s=e.match(/^machikasa:\/\/umbrella\/([\w-]+)$/);return s?s[1]:null}t.d(s,{Di:()=>a,KB:()=>c,VB:()=>r,Vw:()=>n,Xw:()=>x,fU:()=>l,pK:()=>i,w7:()=>d})},26921:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},37322:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(95155),l=t(12115),r=t(52619),c=t.n(r),n=t(7685),i=t(18475),d=t(72202),x=t(21873),m=t(95664);function h(){let[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)([]),[h,o]=(0,l.useState)([]);(0,l.useEffect)(()=>{n.I.initialize(),s(n.I.getCurrentUser()),r(n.I.getStations());let e=n.I.getCurrentUser();e&&o(n.I.getUserTransactions(e.id,3))},[]);let u=t.reduce((e,s)=>e+s.currentCount,0);return t.reduce((e,s)=>e+s.capacity,0),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center pt-8 pb-6 md:pt-4 md:pb-2",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("span",{className:"text-6xl block mb-4",children:"☂️"}),(0,a.jsx)("h1",{className:"text-heading-xl mb-3",children:"MachiKasa"})]}),(0,a.jsx)("p",{className:"text-heading-md text-gray-800 mb-2",children:"福井大学傘シェア"}),(0,a.jsxs)("p",{className:"text-body mb-8",children:["雨の日をみんなで支える",(0,a.jsx)("br",{className:"md:hidden"}),"地域コミュニティの傘シェアリング"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 text-center shadow-sm border border-gray-100",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-500 mb-1",children:u}),(0,a.jsx)("div",{className:"text-caption",children:"利用可能"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 text-center shadow-sm border border-gray-100",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-success mb-1",children:t.length}),(0,a.jsx)("div",{className:"text-caption",children:"ステーション"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 text-center shadow-sm border border-gray-100",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-amber-600 mb-1",children:(null==e?void 0:e.points)||0}),(0,a.jsx)("div",{className:"text-caption",children:"ポイント"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(c(),{href:"/map",className:"block",children:(0,a.jsxs)("button",{className:"w-full bg-blue-500 text-white py-4 px-6 rounded-2xl font-semibold text-lg flex items-center justify-center space-x-3 shadow-sm active:scale-95 transition-transform duration-150",children:[(0,a.jsx)(x.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"ステーションを見る"})]})}),(0,a.jsx)(c(),{href:"/scan",className:"block",children:(0,a.jsxs)("button",{className:"w-full bg-white border-2 border-blue-500 text-blue-500 py-4 px-6 rounded-2xl  font-semibold text-lg flex items-center justify-center space-x-3 shadow-sm active:scale-95 transition-transform duration-150",children:[(0,a.jsx)(m.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"QRコードをスキャン"})]})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 text-center",children:"使い方"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"text-4xl flex-shrink-0",children:"\uD83D\uDD0D"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold mb-2",children:"1. ステーションを探す"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"マップで近くの傘ステーションを確認し、利用可能な傘があるか調べます"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-card p-4 shadow-card",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"text-3xl flex-shrink-0",children:"\uD83D\uDCF1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold mb-2",children:"2. QRコードをスキャン"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"傘のQRコードをスマホでスキャンして借りる・返すの操作を行います"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-card p-4 shadow-card",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"text-3xl flex-shrink-0",children:"\uD83C\uDF89"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold mb-2",children:"3. ポイント獲得"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"傘を返却するとポイントがもらえます。コミュニティに貢献しましょう！"})]})]})})]})]}),e&&h.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"最近の利用履歴"}),(0,a.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,a.jsx)(i.bn,{transaction:e},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"近くのステーション"}),(0,a.jsx)(c(),{href:"/map",className:"text-machikasa-blue hover:text-blue-600 font-medium text-sm",children:"すべて見る →"})]}),(0,a.jsx)("div",{className:"space-y-3",children:t.slice(0,3).map(e=>(0,a.jsx)(i.NC,{station:e},e.id))})]}),(0,a.jsxs)("div",{className:"text-center text-gray-500 text-sm space-y-2 pb-6",children:[(0,a.jsx)("p",{children:"\uD83C\uDF31 Machikasaは福井大学の地域コミュニティプロジェクトです"}),(0,a.jsx)("p",{children:"困ったときは最寄りのステーション管理者にお声がけください"})]})]}),(0,a.jsx)(d.A,{})]})}},69174:(e,s,t)=>{Promise.resolve().then(t.bind(t,37322))},72202:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(95155),l=t(52619),r=t.n(l),c=t(95664);function n(e){let{href:s="/scan",onClick:t,className:l="",children:n}=e,i="\n    fixed bottom-20 right-4 z-40\n    w-14 h-14 bg-blue-500 text-white\n    rounded-full shadow-lg\n    flex items-center justify-center\n    transition-all duration-200\n    active:scale-95 active:shadow-md\n    hover:bg-blue-600 hover:shadow-xl\n    md:hidden\n    ".concat(l,"\n  ");return t?(0,a.jsx)("button",{onClick:t,className:i,children:n||(0,a.jsx)(c.A,{size:24})}):(0,a.jsx)(r(),{href:s,className:i,children:n||(0,a.jsx)(c.A,{size:24})})}}},e=>{e.O(0,[940,685,441,493,358],()=>e(e.s=69174)),_N_E=e.O()}]);