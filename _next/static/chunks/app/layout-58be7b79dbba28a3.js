(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1907:(e,t,a)=>{"use strict";a.d(t,{ToastProvider:()=>u,d:()=>d});var s=a(95155),r=a(12115),n=a(42529),l=a(6132),i=a(23327),o=a(65229);let c=(0,r.createContext)({showToast:()=>{},hideToast:()=>{}}),d=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useToast must be used within a ToastProvider");return e};function u(e){let{children:t}=e,[a,n]=(0,r.useState)([]),l=(0,r.useCallback)(e=>{let t="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),a={id:t,duration:5e3,...e};n(e=>[...e,a]),a.duration&&a.duration>0&&setTimeout(()=>{i(t)},a.duration)},[]),i=(0,r.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,s.jsxs)(c.Provider,{value:{showToast:l,hideToast:i},children:[t,(0,s.jsx)(m,{toasts:a,onHide:i})]})}function m(e){let{toasts:t,onHide:a}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full",children:t.map(e=>(0,s.jsx)(h,{toast:e,onHide:a},e.id))})}function h(e){let{toast:t,onHide:a}=e,[c,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{setTimeout(()=>d(!0),10)},[]),(0,s.jsx)("div",{className:"".concat((()=>{let e="p-4 rounded-card shadow-card-hover border-l-4 transition-all duration-300 transform";switch(t.type){case"success":return"".concat(e," bg-green-50 border-green-400 text-green-800");case"error":return"".concat(e," bg-red-50 border-red-400 text-red-800");case"warning":return"".concat(e," bg-yellow-50 border-yellow-400 text-yellow-800");case"info":return"".concat(e," bg-blue-50 border-blue-400 text-blue-800");default:return"".concat(e," bg-gray-50 border-gray-400 text-gray-800")}})()," ").concat(c?"opacity-100 translate-x-0":"opacity-0 translate-x-full"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(()=>{let e="h-5 w-5 mt-0.5";switch(t.type){case"success":return(0,s.jsx)(n.A,{className:"".concat(e," text-green-400")});case"error":return(0,s.jsx)(l.A,{className:"".concat(e," text-red-400")});case"warning":return(0,s.jsx)(l.A,{className:"".concat(e," text-yellow-400")});case"info":return(0,s.jsx)(i.A,{className:"".concat(e," text-blue-400")});default:return(0,s.jsx)(i.A,{className:"".concat(e," text-gray-400")})}})(),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:t.title}),t.message&&(0,s.jsx)("p",{className:"text-sm mt-1 opacity-90",children:t.message})]})]}),(0,s.jsx)("button",{onClick:()=>{d(!1),setTimeout(()=>a(t.id),300)},className:"ml-3 text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close notification",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})})}},5254:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,41290,23)),Promise.resolve().then(a.bind(a,98745)),Promise.resolve().then(a.bind(a,98942)),Promise.resolve().then(a.bind(a,37210)),Promise.resolve().then(a.bind(a,38234)),Promise.resolve().then(a.bind(a,1907)),Promise.resolve().then(a.t.bind(a,97074,23))},6132:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},20508:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21873:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},23327:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},25016:(e,t,a)=>{"use strict";function s(e){return new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function r(e){return e.substring(0,5)}function n(e){switch(e){case"available":return"利用可能";case"in_use":return"使用中";case"maintenance":return"メンテナンス";case"lost":return"紛失";default:return"不明"}}function l(e){switch(e){case"good":return"良好";case"fair":return"普通";case"poor":return"要修理";default:return"不明"}}function i(e){switch(e){case"student":return"学生";case"store":return"店舗";case"admin":return"管理者";default:return"不明"}}function o(){let e=["次の人のためにありがとう☂️","素晴らしい！地域の輪を広げています\uD83C\uDF1F","お疲れさまでした！ポイントが加算されました✨","ご利用ありがとうございました\uD83D\uDE4F","みんなで支える街づくり、感謝です\uD83D\uDC99","傘シェアコミュニティの一員として感謝！\uD83E\uDD1D","雨の日を支えてくれてありがとう\uD83C\uDF27️","返却完了！次回もよろしくお願いします\uD83D\uDE0A"];return e[Math.floor(Math.random()*e.length)]}function c(e){return/^machikasa:\/\/umbrella\/[\w-]+$/.test(e)}function d(e){let t=e.match(/^machikasa:\/\/umbrella\/([\w-]+)$/);return t?t[1]:null}a.d(t,{Di:()=>s,KB:()=>l,VB:()=>n,Vw:()=>i,Xw:()=>d,fU:()=>r,pK:()=>o,w7:()=>c})},37210:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(95155),r=a(12115),n=a(1907);let l=(0,a(71847).A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function i(){let[e,t]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),{showToast:o}=(0,n.d)();return((0,r.useEffect)(()=>{t(navigator.onLine);let e=()=>{t(!0),i(!1),o({type:"success",title:"オンラインに復帰",message:"インターネット接続が復帰しました。"})},a=()=>{t(!1),i(!0),o({type:"warning",title:"オフラインモード",message:"インターネット接続がありません。オフラインで継続します。"})};return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}},[o]),(0,r.useEffect)(()=>{if(a){let e=setTimeout(()=>{i(!1)},5e3);return()=>clearTimeout(e)}},[a]),!a&&e)?null:(0,s.jsxs)("div",{className:"relative",children:[!e&&(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,s.jsxs)("div",{className:"bg-orange-100 border border-orange-400 text-orange-800 px-3 py-2 rounded-lg shadow-lg flex items-center space-x-2",children:[(0,s.jsx)(l,{size:16}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"オフライン"})]})}),a&&(0,s.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 bg-orange-500 text-white p-4 shadow-lg",children:[(0,s.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(l,{size:20}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"オフラインモード"}),(0,s.jsx)("p",{className:"text-sm text-orange-100",children:"インターネット接続がありません。一部の機能が制限されます。"})]})]}),(0,s.jsx)("button",{onClick:()=>i(!1),className:"text-orange-100 hover:text-white",children:"✕"})]}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto mt-3 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-green-300",children:"✓"}),(0,s.jsx)("span",{children:"QRスキャン機能"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-green-300",children:"✓"}),(0,s.jsx)("span",{children:"傘の貸出・返却"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-green-300",children:"✓"}),(0,s.jsx)("span",{children:"ローカルデータ保存"})]})]})]})]})}},38234:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var s=a(95155),r=a(12115),n=a(7685);function l(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(0);if((0,r.useEffect)(()=>{n.I.initialize(),t(n.I.getSponsors().filter(e=>e.active))},[]),(0,r.useEffect)(()=>{if(0===e.length)return;let t=setInterval(()=>{l(t=>(t+1)%e.length)},5e3);return()=>clearInterval(t)},[e.length]),0===e.length)return null;let i=e[a];return(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDFC6"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"協賛:"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:[(0,s.jsx)("img",{src:i.logoUrl,alt:i.name,className:"w-full h-full object-contain rounded-full",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.textContent=i.name.charAt(0)}}),(0,s.jsx)("div",{className:"text-sm font-bold text-gray-700 hidden"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-sm",children:i.name}),(0,s.jsx)("div",{className:"text-xs opacity-90 truncate max-w-xs",children:i.message})]})]})]}),e.length>1&&(0,s.jsx)("div",{className:"flex items-center space-x-2",children:e.map((e,t)=>(0,s.jsx)("button",{onClick:()=>l(t),className:"w-2 h-2 rounded-full transition-all duration-300 ".concat(t===a?"bg-white":"bg-white bg-opacity-50"),"aria-label":"View sponsor ".concat(t+1)},t))})]})})})}},41290:()=>{},42529:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},52472:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},65993:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},97074:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_1f84f4"}},98745:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var s=a(95155),r=a(52619),n=a.n(r),l=a(20063),i=a(65993),o=a(21873),c=a(95664),d=a(20508);let u=[{href:"/",label:"ホーム",icon:i.A,emoji:"\uD83C\uDFE0"},{href:"/map",label:"マップ",icon:o.A,emoji:"\uD83D\uDDFA️"},{href:"/scan",label:"スキャン",icon:c.A,emoji:"\uD83D\uDCF1"},{href:"/profile",label:"プロフィール",icon:d.A,emoji:"\uD83D\uDC64"}];function m(){let e=(0,l.usePathname)();return(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden safe-area-pb",children:(0,s.jsx)("div",{className:"flex items-center justify-around h-16 px-2",children:u.map(t=>{let a=e===t.href,r=t.icon;return(0,s.jsxs)(n(),{href:t.href,className:"\n                flex flex-col items-center justify-center\n                min-w-[44px] min-h-[44px] px-2 py-1\n                rounded-lg transition-all duration-200\n                active:scale-95 active:bg-gray-100\n                ".concat(a?"text-blue-500 bg-blue-50":"text-gray-600 hover:text-blue-500 hover:bg-gray-50","\n              "),children:[(0,s.jsx)(r,{size:20,className:"mb-1"}),(0,s.jsx)("span",{className:"text-xs font-medium leading-none",children:t.label})]},t.href)})})})}},98942:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var s=a(95155),r=a(52619),n=a.n(r),l=a(20063),i=a(12115),o=a(7685),c=a(25016),d=a(65993),u=a(21873),m=a(95664),h=a(52472),x=a(20508),f=a(71847);let b=(0,f.A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p=(0,f.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),g=(0,f.A)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),y={ja:{nav:{home:"ホーム",map:"マップ",scan:"スキャン",sponsors:"協賛",profile:"プロフィール",admin:"管理"},home:{title:"Machikasa",subtitle:"福井大学傘シェアリングサービス",welcome:"ようこそ",description:"QRコードをスキャンして、雨の日も快適に過ごしましょう。",getStarted:"利用を開始",howItWorks:"使い方",scanQR:"QRスキャン",borrowReturn:"借用・返却",earnPoints:"ポイント獲得"},actions:{borrow:"借りる",return:"返す",scan:"スキャン",confirm:"確認",cancel:"キャンセル",close:"閉じる",save:"保存",delete:"削除",edit:"編集",export:"エクスポート",reset:"リセット"},status:{loading:"読み込み中...",success:"成功",error:"エラー",warning:"警告",completed:"完了しました",processing:"処理中..."},umbrella:{borrowed:"傘を借りました",returned:"傘を返却しました",borrowSuccess:"傘の借用が完了しました☂️",returnSuccess:"傘の返却が完了しました\uD83C\uDF08\n次の人のためにありがとうございます！",borrowError:"傘の借用に失敗しました",returnError:"傘の返却に失敗しました",alreadyBorrowed:"この傘は既に借用されています",alreadyReturned:"この傘は既に返却されています",notFound:"傘が見つかりません"},profile:{title:"プロフィール",subtitle:"あなたのMachikasaアカウント情報",totalBorrows:"総貸出回数",totalReturns:"総返却回数",currentPoints:"現在のポイント",streak:"連続返却回数",memberSince:"登録日",lastLogin:"最終ログイン",transactionHistory:"最近の利用履歴",noTransactions:"まだ利用履歴がありません",currentlyBorrowed:"現在借用中"},admin:{title:"管理者ダッシュボード",subtitle:"Machikasa 傘シェアサービス管理画面",totalUmbrellas:"総傘数",activeStations:"稼働ステーション",totalUsers:"総ユーザー数",dailyTransactions:"本日の取引",lastUpdated:"最終更新",exportData:"データエクスポート",resetData:"全データリセット"},sponsors:{title:"協賛企業・パートナー",subtitle:"Machikasa傘シェアリングサービスをご支援いただいている企業・団体をご紹介します",partnerStores:"提携店舗",activeSponsorships:"提供中特典",sponsorSince:"協賛開始",officialSite:"公式サイト",contactUs:"協賛についてお問い合わせ"},map:{title:"ステーション＆加盟店マップ",subtitle:"福井大学周辺の傘ステーションと加盟店を確認できます",stationDetails:"ステーション詳細",partnerStoreDetails:"加盟店詳細",availableUmbrellas:"利用可能な傘",businessHours:"営業時間",features:"特徴",offers:"特典・サービス"},scan:{title:"QRスキャナー",subtitle:"傘のQRコードをスキャンして借用・返却",scanInstructions:"カメラを傘のQRコードに向けてください",manualInput:"手動入力",enterCode:"コードを入力",cameraPermission:"カメラの使用許可が必要です",enableCamera:"カメラを有効にする"},common:{points:"ポイント",umbrellas:"傘",stations:"ステーション",users:"ユーザー",today:"今日",week:"週",month:"月",year:"年",all:"すべて"}},en:{nav:{home:"Home",map:"Map",scan:"Scan",sponsors:"Sponsors",profile:"Profile",admin:"Admin"},home:{title:"Machikasa",subtitle:"Fukui University Umbrella Sharing Service",welcome:"Welcome",description:"Scan QR codes to stay comfortable on rainy days.",getStarted:"Get Started",howItWorks:"How It Works",scanQR:"Scan QR",borrowReturn:"Borrow & Return",earnPoints:"Earn Points"},actions:{borrow:"Borrow",return:"Return",scan:"Scan",confirm:"Confirm",cancel:"Cancel",close:"Close",save:"Save",delete:"Delete",edit:"Edit",export:"Export",reset:"Reset"},status:{loading:"Loading...",success:"Success",error:"Error",warning:"Warning",completed:"Completed",processing:"Processing..."},umbrella:{borrowed:"Umbrella borrowed",returned:"Umbrella returned",borrowSuccess:"Umbrella borrowed successfully ☂️",returnSuccess:"Umbrella returned successfully \uD83C\uDF08\nThank you for helping the next person!",borrowError:"Failed to borrow umbrella",returnError:"Failed to return umbrella",alreadyBorrowed:"This umbrella is already borrowed",alreadyReturned:"This umbrella is already returned",notFound:"Umbrella not found"},profile:{title:"Profile",subtitle:"Your Machikasa account information",totalBorrows:"Total Borrows",totalReturns:"Total Returns",currentPoints:"Current Points",streak:"Return Streak",memberSince:"Member Since",lastLogin:"Last Login",transactionHistory:"Recent Transaction History",noTransactions:"No transaction history yet",currentlyBorrowed:"Currently Borrowed"},admin:{title:"Admin Dashboard",subtitle:"Machikasa Umbrella Sharing Service Management",totalUmbrellas:"Total Umbrellas",activeStations:"Active Stations",totalUsers:"Total Users",dailyTransactions:"Today's Transactions",lastUpdated:"Last Updated",exportData:"Export Data",resetData:"Reset All Data"},sponsors:{title:"Sponsors & Partners",subtitle:"Companies and organizations supporting the Machikasa umbrella sharing service",partnerStores:"Partner Stores",activeSponsorships:"Active Benefits",sponsorSince:"Sponsor Since",officialSite:"Official Site",contactUs:"Contact Us About Sponsorship"},map:{title:"Stations & Partner Store Map",subtitle:"Check umbrella stations and partner stores around Fukui University",stationDetails:"Station Details",partnerStoreDetails:"Partner Store Details",availableUmbrellas:"Available Umbrellas",businessHours:"Business Hours",features:"Features",offers:"Benefits & Services"},scan:{title:"QR Scanner",subtitle:"Scan umbrella QR codes to borrow or return",scanInstructions:"Point the camera at the umbrella QR code",manualInput:"Manual Input",enterCode:"Enter Code",cameraPermission:"Camera permission required",enableCamera:"Enable Camera"},common:{points:"Points",umbrellas:"Umbrellas",stations:"Stations",users:"Users",today:"Today",week:"Week",month:"Month",year:"Year",all:"All"}}};function v(){let e=localStorage.getItem("machikasa_language");return e&&("ja"===e||"en"===e)?e:(navigator.language||navigator.languages[0]).startsWith("ja")?"ja":"en"}function j(e){localStorage.setItem("machikasa_language",e)}function w(){let{lang:e,setLang:t}=function(){let e=v();return{t:t=>(function(e,t){let a=t||v(),s=e.split("."),r=y[a];for(let e of s)if(void 0===(r=null==r?void 0:r[e]))break;if(void 0===r&&"en"===a){for(let e of(r=y.ja,s))if(void 0===(r=null==r?void 0:r[e]))break}return r||e})(t,e),lang:e,setLang:j}}(),[a,r]=(0,i.useState)(!1),n=[{code:"ja",name:"日本語",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"}],l=n.find(t=>t.code===e)||n[0];return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>r(!a),className:"flex items-center space-x-1 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"言語を選択 / Select language",children:[(0,s.jsx)(g,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:l.flag}),(0,s.jsx)("span",{className:"hidden md:inline",children:l.name})]}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>r(!1)}),(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:(0,s.jsx)("div",{className:"py-1",children:n.map(a=>(0,s.jsxs)("button",{onClick:()=>{var e;j(e=a.code),t(e),r(!1),window.location.reload()},className:"w-full flex items-center space-x-3 px-4 py-2 text-sm text-left hover:bg-gray-100 transition-colors ".concat(a.code===e?"bg-blue-50 text-blue-700":"text-gray-700"),children:[(0,s.jsx)("span",{className:"text-lg",children:a.flag}),(0,s.jsx)("span",{children:a.name}),a.code===e&&(0,s.jsx)("span",{className:"ml-auto text-blue-600",children:"✓"})]},a.code))})})]})]})}function k(){let e=(0,l.usePathname)(),[t,a]=(0,i.useState)(null);(0,i.useEffect)(()=>{o.I.initialize(),a(o.I.getCurrentUser())},[]);let r=[{href:"/",label:"ホーム",icon:d.A,emoji:"\uD83C\uDFE0"},{href:"/map",label:"マップ",icon:u.A,emoji:"\uD83D\uDDFA️"},{href:"/scan",label:"スキャン",icon:m.A,emoji:"\uD83D\uDCF1"},{href:"/sponsors",label:"協賛",icon:h.A,emoji:"\uD83C\uDFC6"},{href:"/profile",label:"プロフィール",icon:x.A,emoji:"\uD83D\uDC64"},{href:"/admin",label:"管理",icon:b,emoji:"⚙️"}],f=()=>{let e=o.I.getUsers(),s=(e.findIndex(e=>e.id===(null==t?void 0:t.id))+1)%e.length,r=e[s];o.I.setCurrentUser(r),a(r)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{className:"hidden md:block bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-40",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"☂️"}),(0,s.jsx)(n(),{href:"/",className:"text-xl font-bold text-machikasa-blue",children:"Machikasa"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-1",children:r.map(t=>{let a=e===t.href,r=t.icon;return(0,s.jsxs)(n(),{href:t.href,className:"flex items-center px-4 py-2 rounded-card text-sm font-medium transition-all duration-200 ".concat(a?"bg-machikasa-blue text-white shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-machikasa-blue"),"aria-label":t.label,children:[(0,s.jsx)(r,{className:"h-4 w-4 mr-2"}),t.label]},t.href)})}),(0,s.jsx)(w,{}),t&&(0,s.jsxs)("button",{onClick:f,className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 rounded-card hover:bg-gray-200 transition-all duration-200 text-sm",title:"ユーザーを切り替える (デモ用)","aria-label":"Switch user for demo",children:[(0,s.jsx)("span",{className:"text-gray-700",children:t.nameJa}),(0,s.jsx)(p,{className:"h-4 w-4 text-gray-500"})]})]})})}),(0,s.jsxs)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 shadow-lg",children:[(0,s.jsx)("div",{className:"grid grid-cols-5 h-16",children:r.map(t=>{let a=e===t.href,r=t.icon;return(0,s.jsxs)(n(),{href:t.href,className:"flex flex-col items-center justify-center space-y-1 text-xs font-medium transition-all duration-200 ".concat(a?"text-machikasa-blue bg-blue-50":"text-gray-500 hover:text-machikasa-blue active:scale-95"),"aria-label":t.label,children:[(0,s.jsx)(r,{className:"h-5 w-5 ".concat(a?"text-machikasa-blue":"text-gray-400")}),(0,s.jsx)("span",{className:"".concat(a?"text-machikasa-blue font-semibold":"text-gray-500"),children:t.label}),a&&(0,s.jsx)("div",{className:"absolute bottom-0 w-8 h-0.5 bg-machikasa-blue rounded-full"})]},t.href)})}),t&&(0,s.jsx)("div",{className:"absolute -top-10 left-2 right-2",children:(0,s.jsxs)("button",{onClick:f,className:"w-full flex items-center justify-center space-x-2 px-3 py-1.5 bg-gray-100 rounded-card hover:bg-gray-200 transition-all duration-200 text-xs border border-gray-200",title:"ユーザーを切り替える (デモ用)","aria-label":"Switch user for demo",children:[(0,s.jsxs)("span",{className:"text-gray-700 truncate",children:[t.nameJa," (",(0,c.Vw)(t.role),")"]}),(0,s.jsx)(p,{className:"h-3 w-3 text-gray-500 flex-shrink-0"})]})})]}),(0,s.jsx)("div",{className:"hidden md:block h-16"}),(0,s.jsx)("div",{className:"md:hidden h-16"})]})}}},e=>{e.O(0,[904,940,685,441,493,358],()=>e(e.s=5254)),_N_E=e.O()}]);